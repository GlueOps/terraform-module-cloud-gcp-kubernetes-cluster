# terraform-module-cloud-gcp-kubernetes-cluster

This Terraform module deploys everything you need in GCP to get a kubernetes cluster up and running. This repo should be used in the context of deploying with an [admiral](https://github.com/glueops/admiral)

## Prequisites

### Project Setup

1. A **new** GCP Project with the `cloudresourcemanager.googleapis.com` enabled.

   * Example for a project called [glueops-test-1](https://console.developers.google.com/apis/api/cloudresourcemanager.googleapis.com/overview?project=glueops-test-1)

2. Service Quota increase: `In-use IP addresses (default is 8)`. Have this increased to 64. _Note: this increase should be immediate, otherwise contact GCP support/account maangement_

![Screenshot of Quota Increase](https://user-images.githubusercontent.com/6570292/210277244-f3a75d06-763f-4bdc-805e-4f8bd3c77ad5.png)

### Service Account

1. Create a service account and download the json key file, save the file as `creds.json`

2. Set env variable:

    ```bash

    export GOOGLE_APPLICATION_CREDENTIALS=creds.json
    ```

3. In the project, give the service account the `Owner` role.
